name: Go CLI
on:
    push:
        branches: [ main ]
    pull_request: 
        branches: [ main ]
jobs:
    test:
        runs-on: ubuntu-latest
        steps:
            -   name: Checkout code
                uses: actions/checkout@v4
            -   name: Setup GO
                uses: actions/setup-go@v5
                with: 
                    go-version: '1.24'
            -   name: Download deps...
                run: go mod tidy
            -   name: Run tests...
                run: go test ./... -v -coverprofile=coverage.out
            -   name: Lint code
                run: go vet ./...
            -   name: Upload Test Coverage (artifact)
                uses: actions/upload-artifact@v4
                with:
                    name: coverage
                    path: coverage.out
